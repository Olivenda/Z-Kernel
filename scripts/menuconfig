#!/bin/sh
# Simple menuconfig-like script that writes config.mk
# Requires /bin/sh - uses basic read prompts

CFG=config.mk
cat > /tmp/menuconfig.$$ <<EOF
# Generated by make menuconfig
EOF

read_yesno() {
    prompt="$1"
    default="$2"
    while true; do
        printf "%s [%s]: " "$prompt" "$default"
        read ans
        ans="
    done
}

# ENABLE_HELLO
printf "Enable Hello message? (y/n) [y]: "
read ans
ans=${ans:-y}
if echo "$ans" | grep -qi "^y"; then
    EH=1
else
    EH=0
fi

# LANGUAGE
printf "Language: 1) English 2) Deutsch [1]: "
read L
L=${L:-1}
if [ "$L" = "2" ]; then
    LANG=de
else
    LANG=en
fi

# USE_GRUB
printf "Create ISO with GRUB? (y/n) [y]: "
read G
G=${G:-y}
if echo "$G" | grep -qi "^y"; then
    UG=1
else
    UG=0
fi

cat > $CFG <<EOF
ENABLE_HELLO = ${EH}
LANGUAGE = ${LANG}
USE_GRUB = ${UG}
EOF

echo "Wrote $CFG"